#!/bin/env cmsRun

process combinedsv = {
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    # replace MessageLogger.cerr.default.limit = 1000000
    replace MessageLogger.debugModules = { "" }

    source = PoolSource {
      # untracked vstring fileNames = { "file:bb.root"}
      untracked vstring fileNames = { '/store/mc/2008/2/6/RelVal-RelValBJets_Pt_50_120-1202314517/0000/16FD795A-23D5-DC11-9973-000423D6B42C.root' }
      # untracked vstring fileNames = { 'file:../../../RelVal.root' }
      # untracked int32 maxEvents = 1
      # untracked uint32 skipEvents = 1
    }

    untracked PSet maxEvents = {untracked int32 input = 2 }

    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "TrackingTools/TransientTrack/data/TransientTrackBuilder.cfi"
    include "RecoVertex/PrimaryVertexProducer/data/OfflinePrimaryVerticesFromCTFTracks.cfi"
	  include "RecoVertex/BeamSpotProducer/data/BeamSpot.cff"

    # module execution
# path p = { iterativeCone5BasicJets, ic5JetTracksAssociatorAtVertex, offlinePrimaryVerticesFromCTFTracks, combinedSVBJetTags }

# path p = { }

    module out = PoolOutputModule {
      untracked string fileName = "file:cvrtracks.root"
      # type_label_instance_process
      untracked vstring outputCommands = { "drop *", "keep *_ctfWithMaterialTracks_*_*", "keep *_offlinePrimaryVerticesFromCTFTracks_*_*", "keep *_offlineBeamSpot_*_*", "keep *_trackingtruthprod_*_*", "keep *_iterativeCone5JetTracksAssociatorAtVertex_*_*", "keep *_siStripDigis_*_*" }
      # untracked vstring outputCommands = { "drop recoCombinedSVTagInfos_combinedSVBJetTags_*_*" }
    }

    endpath outpath = { out }
}
